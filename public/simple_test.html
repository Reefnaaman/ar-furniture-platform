<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Test Page</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            padding: 20px;
            margin: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
        }
        .content {
            background: rgba(0,0,0,0.2);
            padding: 30px;
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }
        .status {
            font-size: 1.2rem;
            margin: 10px 0;
        }
        .button {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }
        .button:hover {
            background: rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
    <div class="content">
        <h1>üß™ Simple Test Page</h1>
        <div class="status" id="status">Loading...</div>
        <div class="status" id="iframeStatus"></div>
        
        <button class="button" onclick="sendTestMessage()">Send Test Message</button>
        <button class="button" onclick="changeColors()">Change Colors</button>
        
        <div style="margin-top: 20px;">
            <div>Current Time: <span id="time"></span></div>
            <div>Page URL: <span id="url"></span></div>
            <div>In Iframe: <span id="inIframe"></span></div>
        </div>
    </div>

    <script>
        console.log('üöÄ Simple test page loaded');
        
        // Update time every second
        function updateTime() {
            document.getElementById('time').textContent = new Date().toLocaleTimeString();
        }
        setInterval(updateTime, 1000);
        updateTime();
        
        // Display URL
        document.getElementById('url').textContent = window.location.href;
        
        // Check if in iframe
        const isInIframe = window.parent !== window.self;
        document.getElementById('inIframe').textContent = isInIframe ? 'YES' : 'NO';
        document.getElementById('iframeStatus').textContent = isInIframe ? 'üñºÔ∏è Running in iframe' : 'üåê Running standalone';
        
        // Update status
        document.getElementById('status').textContent = '‚úÖ Page loaded successfully';
        
        console.log('üîç Iframe detection:', {
            isInIframe,
            windowParent: window.parent,
            windowSelf: window.self,
            href: window.location.href
        });
        
        if (isInIframe) {
            console.log('üì° Sending ready signal to parent');
            try {
                window.parent.postMessage({
                    type: 'simpleTestReady',
                    timestamp: Date.now(),
                    url: window.location.href,
                    message: 'Simple test page loaded in iframe'
                }, '*');
                console.log('‚úÖ Ready signal sent to parent');
            } catch (error) {
                console.error('‚ùå Failed to send message to parent:', error);
            }
        }
        
        function sendTestMessage() {
            if (isInIframe) {
                try {
                    window.parent.postMessage({
                        type: 'testMessage',
                        timestamp: Date.now(),
                        message: 'Hello from simple test page!'
                    }, '*');
                    console.log('üì§ Test message sent');
                } catch (error) {
                    console.error('‚ùå Failed to send test message:', error);
                }
            } else {
                alert('Not running in iframe - cannot send message to parent');
            }
        }
        
        function changeColors() {
            const colors = [
                'linear-gradient(45deg, #ff6b6b, #4ecdc4)',
                'linear-gradient(45deg, #a8edea, #fed6e3)', 
                'linear-gradient(45deg, #ffecd2, #fcb69f)',
                'linear-gradient(45deg, #667eea, #764ba2)'
            ];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            document.body.style.background = randomColor;
            
            if (isInIframe) {
                window.parent.postMessage({
                    type: 'colorChanged',
                    color: randomColor
                }, '*');
            }
        }
        
        // Listen for messages from parent
        window.addEventListener('message', function(event) {
            console.log('üì® Received message from parent:', event.data);
            
            if (event.data.type === 'changeColor') {
                document.body.style.background = event.data.color;
            }
        });
        
        console.log('üéØ Simple test page initialization complete');
    </script>
</body>
</html>